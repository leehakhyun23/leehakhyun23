package JDBC;

import java.util.Scanner;

public class Rentlist_Update {

	public static void main(String[] args) {
		
		Scanner sc = new Scanner(System.in);
		RentDao rdao = RentDao.getInstance();
		RentDto rdto = new RentDto();
		
		
		//수정할 대여기록의 번호 입력
		String numseq;
		
		while(true) {		System.out.print("수정할 대여 기록의 번호를 입력하세요");
		numseq = sc.nextLine();
			int result = rdao.numseqOk(numseq); // 입력한 도서번호가 존재하면 1 , 없으면 0을 리턴
			if(result == 0) {
				System.out.println("해당 대여기록 번호가  없습니다. 다시 입력하세요"); //기록이 있는지 확인합니다. 없으면 종료
				continue;
			}else {
				System.out.printf("입력된 대여기록 번호:" + numseq + "\n");
				break;
			}
			
		} 
		//수정할 도서번호를 입력, 입력한 번호의 도서가 없으면 다시 입력
		
		String booknum;
		
		while(true) {	
			System.out.print("대여할 도서의 도서번호를 입력하세요");
			booknum = sc.nextLine();
			int result = rdao.bookOk(booknum); // 입력한 멤버번호가 존재하면 1 , 없으면 0을 리턴
			if(result == 0) {
				System.out.println("해당 도서가 없습니다. 다시 입력하세요");
				continue;
			}else {
				System.out.println("입력된 도서 번호:" +  booknum + "\n");
				break;
			}
			
		}
		// 수정할 회원번호를 입력, 입력한 번호의 회원번호가 없으면 다시 입력 
		String membernum;
		
		while(true) {		System.out.print("대여할 회원의 회원번호를 입력하세요");
			membernum = sc.nextLine();
			int result = rdao.memberOk(membernum); // 입력한 멤버번호가 존재하면 1 , 없으면 0을 리턴
			if(result == 0) {
				System.out.println("해당 회원이 없습니다. 다시 입력하세요");
				continue;
			}else {
				System.out.printf("입력된 회원 번호:" + membernum + "\n");
				break;
			}
			
		}
		// 수정할 할인금액 입력
		System.out.println("할인금액을 입력하세요");
		int discount = Integer.parseInt(sc.nextLine());
		
		rdto.setMnum(Integer.parseInt(membernum));
		rdto.setBnum(Integer.parseInt(booknum));
		rdto.setDiscount(discount);
		
		int res = rdao.UpdateRent(rdto);
		if(res == 1) System.out.println("추가성공");
		else System.out.println("추가 실패");
		
	}
		// rentDto에 모두 담아서 updateRent 메소드에 전송
		
		
	}

}
